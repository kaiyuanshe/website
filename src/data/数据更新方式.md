# 开源社数据更新指南

## 数据文件概览

项目中的数据文件存储在 `src/data/` 目录下，包含以下四个主要数据文件：

### 1. awards.ts - 奖项获得者数据
**文件路径**: `src/data/awards.ts`

**主要数据结构**:
```typescript
export interface AwardRecipient {
  name: string
  nickname?: string
  avatar?: string
  date?: number
  year?: number
  recommendation?: string
}

export interface Pioneer {
  id: number
  name: string
  title: string
  description: string
  avatar: string
  year: number
}
```

**主要变量**:
- `openSourceStars` - 开源之星数据（按年份）
- `cosconStars2023/2022/2021...` - COSCon之星年度数据
- `yearlyStars` - COSCon之星年度汇总数据
- `pioneers` - 开源先锋榜数据

### 2. committees.ts - 委员会人员数据
**文件路径**: `src/data/committees.ts`

**主要数据结构**:
```typescript
export interface CommitteeMember {
  name: string
  pronouns?: string
  title: string
  organization: string
  avatar: string
  twitter?: string
  github?: string
  linkedin?: string
  email?: string
  bio?: string
  details?: string[]
}

export interface WorkingGroup {
  name: string
  description: string
  leader: string
  viceLeader?: string[]
  members: string[]
}
```

**主要变量**:
- `boardMembers` - 理事会成员数据
- `advisoryMembers` - 顾问委员会成员数据
- `legalMembers` - 法律咨询委员会成员数据
- `projectMembers` - 项目委员会成员数据
- `workingGroups` - 执行委员会工作组数据

### 3. members.ts - 正式成员数据
**文件路径**: `src/data/members.ts`

**主要数据结构**:
```typescript
interface Member {
  name: string
  gender: '男' | '女'
  avatar: string
  city?: string
  email?: string
  website?: string
  github?: string
  nickname?: string
  githubUsername?: string
  bio?: string
  position?: string
  company?: string
  skills?: string[]
  achievements?: string[]
  details?: string[]
}
```

**主要变量**:
- `members` - 正式成员数据数组

**工具函数**:
- `findMemberByName()` - 根据姓名查找成员
- `findMemberByNickname()` - 根据昵称查找成员
- `searchMembers()` - 搜索成员
- 其他筛选和查询函数

### 4. partners.ts - 合作伙伴数据
**文件路径**: `src/data/partners.ts`

**主要数据结构**:
```typescript
export interface Partner {
  title: string
  organization: string
  person: string
  year: string
  level: string
  link: string
  logo: string
  tag: string
}
```

**主要变量**:
- `partnersRawData` - 合作伙伴原始数据数组
- `partnersData` - 按级别组织的合作伙伴数据
- `partnersByYear` - 按年份组织的合作伙伴数据
- `levelOrder` - 赞助等级排序

## 静态资源目录结构

**主目录**: `public/`

### 图片资源结构
```
public/
├── img/
│   ├── home/          # 首页图片
│   ├── board/         # 理事会成员头像
│   ├── conduct/       # 行为准则相关图片
│   ├── about/         # 关于我们页面图片
│   ├── partners/      # 合作伙伴Logo
│   ├── report/        # 报告相关图片
│   ├── volunteers/    # 志愿者头像
│   └── rotation/      # 轮播图片
├── logo.png           # 主Logo
├── logo_2.svg         # 备用Logo
├── footer-logo.png    # 页脚Logo
└── favicon.ico        # 网站图标
```

## 数据更新方式

### 1. 添加新的奖项获得者
**文件**: `src/data/awards.ts`
```typescript
// 在相应数组中添加新成员
export const openSourceStars: AwardRecipient[] = [
  // 现有数据...
  {
    name: '新获奖者姓名',
    nickname: '昵称',
    avatar: '/img/volunteers/new-avatar.webp',
    date: 2024,
    recommendation: '推荐理由...'
  }
]
```

### 2. 添加新的委员会成员
**文件**: `src/data/committees.ts`
```typescript
// 在相应委员会数组中添加
export const boardMembers: CommitteeMember[] = [
  // 现有数据...
  {
    name: '新成员姓名',
    title: '职位',
    organization: '组织',
    avatar: '/img/board/new-member.webp',
    email: 'email@kaiyuanshe.org',
    bio: '个人简介...'
  }
]
```

### 3. 添加新的正式成员
**文件**: `src/data/members.ts`
```typescript
export const members: Member[] = [
  // 现有数据...
  {
    name: '新成员姓名',
    gender: '男', // 或 '女'
    avatar: '/img/cblecker.png', // 默认头像或自定义头像
    city: '城市',
    email: 'email@kaiyuanshe.org',
    github: 'https://github.com/username',
    bio: '个人简介...'
  }
]
```

### 4. 添加新的合作伙伴
**文件**: `src/data/partners.ts`
```typescript
export const partnersRawData: Partner[] = [
  // 现有数据...
  {
    title: '2024 白金赞助 新合作伙伴',
    organization: '新合作伙伴名称',
    person: '',
    year: '2024',
    level: '白金赞助',
    link: 'https://partner-website.com',
    logo: '/img/partners/new-partner.png',
    tag: '新标签'
  }
]
```

## 图片资源使用规范

### 1. 图片路径引用
- **绝对路径**: 所有图片都使用以 `/` 开头的绝对路径
- **示例**: `/img/board/member.webp`

### 2. 图片命名规范
- **默认头像**: `/img/cblecker.png`

### 3. 图片格式建议
- **头像**: 推荐使用 `.webp` 格式（体积小，质量好）
- **Logo**: 推荐使用 `.png` 格式（支持透明背景）
- **其他**: 根据需要选择 `.jpg`、`.svg` 等格式

### 4. 图片存放位置
根据用途将图片放置在相应目录：

- **理事会成员头像**: `public/img/board/`
- **合作伙伴Logo**: `public/img/partners/`
- **志愿者头像**: `public/img/volunteers/`
- **一般图片**: `public/img/`

### 5. 添加新图片步骤
1. 将图片文件放到对应的 `public/img/` 子目录中
2. 在数据文件中使用正确的路径引用：`/img/目录名/文件名.扩展名`
3. 确保图片文件名不包含中文字符和特殊符号

## 更新流程建议

1. **备份数据**: 更新前先备份相关数据文件
2. **遵循格式**: 严格按照现有数据结构添加新数据
3. **图片准备**: 提前准备好规格统一的图片文件
4. **测试验证**: 本地运行 `npm run dev` 验证数据显示正确
5. **代码检查**: 运行 `npm run lint` 检查代码规范
6. **提交更改**: 提交前确保所有新增图片都已正确引用

## 常见问题

### Q: 为什么我添加的图片不显示？
A: 检查以下几点：
- 图片路径是否正确（必须以 `/` 开头）
- 图片文件是否存在于 `public/` 目录中
- 文件名是否包含特殊字符

### Q: 如何批量更新大量数据？
A: 建议使用脚本工具或编辑器的批量替换功能，但要小心维护数据结构的完整性

### Q: 数据更新后需要重启服务吗？
A: 在开发环境中，数据文件更新后通常需要刷新页面；在生产环境中需要重新构建部署